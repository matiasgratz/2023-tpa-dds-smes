<head>
    <link rel="stylesheet" type="text/css" href="/main.css">
    <title> SMES - Registrarse</title>
</head>

<div class="fondo-registro">
    <form method="POST" id="miFormulario">
        <div class="contenedor-formularios">

            <h1 class="registro">Registro de Usuario</h1>

            <!-- Formulario de Registro -->
            <div class="formulario-registro">
                <div style="margin-bottom:50px">
                    <div class="campo">
                        <span> Nombre de usuario</span>
                        <input style="text-align:right; width:70%;" type="text" id="usuario" name="usuario"
                               placeholder="Ejemplo: Matías" required>
                    </div>
                    <div style="margin-inline-start:35%">
                    </div>
                </div>

                <div style="margin-bottom:50px">

                    {{#if error}}
                        <div>
                            <p class="error-registro"> Error, el mail ya está en uso. Elegí otro. </p>
                        </div>
                    {{/if}}

                    <div class="campo">
                        <span> E-mail</span>
                        <input style="text-align:right; width:70%;" type="text" id="email" name="email"
                               placeholder="Ejemplo: alguien@ejemplo.com" required>
                    </div>
                    <div style="margin-inline-start:35%">
                    </div>




                </div>

                <div style="margin-bottom:50px">
                    <div class="campo">
                        <span> Teléfono </span>
                        <input style="text-align:right;width:70%;" type="number" id="telefono" name="telefono"
                               placeholder="Ejemplo: 12345678" title="Debe contener al menos 8 dígitos numéricos" required>
                    </div>
                    <div style="margin-inline-start:35%">
                        <p style="color:lightslategray;font-size:12px">Sólo números sin espacios</p>
                    </div>
                </div>

                <div style="margin-bottom:50px">
                    <div class="campo">
                        <span> Contraseña </span>
                        <input style="text-align:right; width:70%;" type="password" id="contrasenia" name="contrasenia"
                               placeholder="********" required pattern="^(?=.*[A-Z])(?=.*[a-z])(?=.*\d)(?=.*[@#$%^&+=]).{8,}$">
                    </div>
                    <div style="margin-inline-start:35%">
                        <p style="color:lightslategray;font-size:12px">La contraseña debe ser de al menos 8 dígitos y
                            contener al menos una letra mayúscula,
                            una letra minúscula, un número y un caracter especial (@ / # / $ / % / ^ / & / =).
                            <br>
                            No uses espacios ni caracteres seguidos o repetidos.
                            <br>
                            Además no utilices contraseñas comunes y fáciles de adivinar como "admin" o tu nombre. </p>
                    </div>

                    {{#if error_contrasenia}}
                        <div>
                            <p class="error-registro">Error, la contraseña no cumple con los requisitos. </p>
                        </div>
                    {{/if}}
                </div>
            </div>



            <!-- Formulario de Notificaciones -->

            <div class="formulario-registro">
                <p style="margin-bottom:50px"> Te mantendremos informado acerca de las novedades reportadas en tus
                    Comunidades y
                    te avisaremos cuando estés cerca de un incidente reportado para que revises si
                    aún sigue interrumpido el servicio.</p>

                <p style="color:black">Elegí un medio de comunicación</p>
                <div class="campo-notificaciones">
                    <div style="margin:15px">
                        <input type="radio" id="notificacion-email" name="notificacion" value="email" checked>
                        <label for="notificacion-email">E-mail</label>
                    </div>
                    <div style="margin:15px">
                        <input type="radio" id="notificacion-telefono" name="notificacion" value="telefono" checked>
                        <label for="notificacion-telefono">Teléfono</label>
                    </div>
                </div>
                <br>
                <p style="color:black">Elegí la franja horaria en la que querés recibir nuestras notificaciones en formato HH:MM</p>

                <div class="campo" style="justify-content:flex-start">

                    <div>
                        <span>Desde</span>
                        <input style="text-align:center" type="text" id="startNotificacion" name="startNotificacion"
                               placeholder="HH:MM" pattern="^([01]?[0-9]|2[0-3]):[0-5][0-9]$"
                               title="Ingresá una hora válida en formato HH:MM"  required>
                    </div>

                    <div >
                        <span>Hasta</span>
                        <input style="text-align:center" type="text" id="finishNotificacion" name="finishNotificacion"
                               placeholder="HH:MM" pattern="^([01]?[0-9]|2[0-3]):[0-5][0-9]$"
                               title="Ingresá una hora válida en formato HH:MM" required>
                    </div>
                </div>

                <i><p style="color:lightslategray; font-size:14px;margin-top:50px;text-align:right">Todos los campos son
                    obligatorios </p></i>


                <div class="botones-registro">
                    <input type="submit" class="boton-registro" value="Registrarme">
                    <button type="button" class="boton-registro" onclick="location.href='/login'"> Ya tengo un usuario
                    </button>
                </div>

            </div>
        </div>
    </form>
</div>

<script>
    document.getElementById("telefono").addEventListener("input", function() {
        var value = this.value;

        var numericValue = value.replace(/[^0-9]/g, "");

        if (numericValue.length < 8 || isNaN(numericValue) || parseInt(numericValue) < 0) {
            this.setCustomValidity("Debe ser un número positivo con al menos 8 dígitos.");
        } else {
            this.setCustomValidity("");
        }
    })
</script>
